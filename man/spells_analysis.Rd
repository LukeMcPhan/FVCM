% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spells_analysis.R
\name{spells_analysis}
\alias{spells_analysis}
\title{Run Spell-Based State Transition Analysis}
\usage{
spells_analysis(
  flow_data,
  inundation_raster,
  between_spell_lengths = 30,
  water_year_start = 4,
  save_spell_rule_timeseries = FALSE
)
}
\arguments{
\item{flow_data}{A data frame with at least columns \code{date} and \code{Q} (flow value).}

\item{inundation_raster}{A raster object used to derive flow thresholds.}

\item{between_spell_lengths}{Integer specifying the maximum dry duration between spells.}

\item{water_year_start}{Starting month of the water year (e.g., 4 for April).}

\item{save_spell_rule_timeseries}{Logical: whether to include full timeseries outputs.}
}
\value{
A list containing:
\itemize{
\item \code{water_years}: Vector of water years evaluated.
\item \code{matrices}: A named list of transition matrices by year and threshold.
\item \code{ID_mat}: Identity matrix (no state change).
\item \code{spell_rule_timeseries} and \code{inundation_rule_timeseries} (if \code{save_spell_rule_timeseries = TRUE}).
}
}
\description{
Applies run-length encoding to flow exceedance time series to identify spells,
matches those to transition rules, and returns transition matrices for each year and scenario.
}
